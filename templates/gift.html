{% extends "base.html" %}

{% block title %}Mi intercambio{% endblock %}

{% block content %}
<div class="card">
  <h2>ğŸ Hola {{ user.name }} â€” Tu intercambio</h2>

  {% if receiver %}
    <p>Te tocÃ³ darle regalo a:</p>
    <h3>{{ receiver.name }}</h3>

    {% if receiver_wishes %}
      <h4>Sus deseos ğŸ„</h4>

      {% if receiver_wishes.wish1 %}
        <div class="wish-option">
          <div class="wish-text">
            <strong>OpciÃ³n 1:</strong> {{ receiver_wishes.wish1 }}
          </div>
          {% if receiver_wishes.wish1_img %}
            {% set img1 = receiver_wishes.wish1_img %}
            {% if img1.startswith('http') %}
              {% set img1_url = img1 %}
            {% else %}
              {% set img1_url = url_for('static', filename='uploads/' ~ img1) %}
            {% endif %}
            <img
              class="wish-img zoomable-image"
              src="{{ img1_url }}"
              data-fullsrc="{{ img1_url }}"
              alt="OpciÃ³n 1 de {{ receiver.name }}"
            >
          {% endif %}
        </div>
      {% endif %}

      {% if receiver_wishes.wish2 %}
        <div class="wish-option">
          <div class="wish-text">
            <strong>OpciÃ³n 2:</strong> {{ receiver_wishes.wish2 }}
          </div>
          {% if receiver_wishes.wish2_img %}
            {% set img2 = receiver_wishes.wish2_img %}
            {% if img2.startswith('http') %}
              {% set img2_url = img2 %}
            {% else %}
              {% set img2_url = url_for('static', filename='uploads/' ~ img2) %}
            {% endif %}
            <img
              class="wish-img zoomable-image"
              src="{{ img2_url }}"
              data-fullsrc="{{ img2_url }}"
              alt="OpciÃ³n 2 de {{ receiver.name }}"
            >
          {% endif %}
        </div>
      {% endif %}

      {% if not receiver_wishes.wish1 and not receiver_wishes.wish2 %}
        <p>AÃºn no ha agregado opciones de regalo.</p>
      {% endif %}

      <p style="font-size:0.85rem; opacity:0.85; margin-top:8px;">
        ğŸ‘‰ Haz clic en las imÃ¡genes para verlas en grande y vuelve a hacer clic fuera o en la âœ– para cerrarlas.
      </p>
    {% else %}
      <p><em>{{ receiver.name }}</em> aÃºn no agrega su lista de deseos.</p>
    {% endif %}
  {% else %}
    <p>No tienes asignaciÃ³n registrada.</p>
  {% endif %}
</div>
{% endblock %}
